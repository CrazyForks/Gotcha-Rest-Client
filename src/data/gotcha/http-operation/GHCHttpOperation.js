import GHCComponent
    from '@/data/gotcha/GHCComponent'
import GHCHttpRequest
    from '@/data/gotcha/http-operation/GHCHttpRequest'
import RabiHttpOperationStatus
    from '@/data/gotcha/http-operation/RabiHttpOperationStatus'

/**
 * JsonMethod 1 -> N RabiHttpOperation
 *
 * @IndexedDB
 */
class GHCHttpOperation extends GHCComponent {
    constructor(props) {
        !props && (props = {})

        super()

        /**
         id Auto generated by IndexedDB
         */

        /**
         * Query all requests by projectId
         *
         * @type {number}
         */
        this.projectId = props.projectId || -1

        /**
         * Query all requests by versionId
         *
         * @type {number}
         */
        this.versionId = props.versionId || -1

        /**
         * Unique Id for each http operation (UUID V4)
         *
         * @index
         * @type {string}
         */
        this.operationId = ""

        this.name = "HTTP Request"

        this.summary = ""

        this.description = ""

        /**
         * Last request status, success or failed
         *
         * NONE | SUCCESS | FAILED | PENDING
         *
         * @type {string}
         */
        this.status = RabiHttpOperationStatus.NONE

        this.requestMethod = "GET"

        this.requestPath = "/"

        /**
         * Request data
         *
         * @type {GHCHttpRequest}
         */
        this.httpRequest = new GHCHttpRequest()

        /**
         * Response data, undefined if no request has been send.
         *
         * @type {RabiHttpResponse}
         */
        this.httpResponse = undefined

        /**
         * @type {RabiHttpError}
         */
        this.httpError = undefined

        /**
         * Request history, max 10
         *
         * @type {RabiHttpOperationHistory[]}
         */
        this.histories = []

        this.createdAt = new Date()

        this.updatedAt = new Date()
    }
}

export default GHCHttpOperation